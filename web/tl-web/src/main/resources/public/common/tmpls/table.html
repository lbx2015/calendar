<script type="text/tmpl">
{{#
var tempAttrs = [];
for(var i=0; i<d.attrs.length ; i++){
    if(d.attrs[i].hidden && d.attrs[i].hidden.indexOf('table') > -1){
    }else{
        tempAttrs.push(d.attrs[i]);
    }
}
d.attrs = tempAttrs;
var tableTdConfig = TmplUtils._getTableTdConfig(d);
}}
{{# if(!tableTdConfig.hasRight){ }}
    <table id="tableLeft" data-hasleftwidth="{{tableTdConfig.hasLeftWidth}}" class="layui-table lay-even lay-tab-left" style="min-height: 450px; width: 100%;">
{{# }else{ }}
    <table id="tableLeft" data-hasleftwidth="{{tableTdConfig.hasLeftWidth}}" class="layui-table lay-even lay-tab-left" style="min-height: 450px;">
{{# } }}
        <colgroup>
{{#
    var row = 1;
    var col = 0;
    var obj = {};
    obj.row = row;
    obj.col = col;
    for(var i=0; i<tableTdConfig.totalCellLeftCount; i++){ }}
        <col width="{{=tableTdConfig.tdLeftWidthList[i]}}%">
{{#   } }}
        </colgroup>
        <thead>
            <tr>
                 {{# if(d.hasCheckbox){
                   col++;
                   obj.col = col;
                 }}
                 {{# if(d.tdBeforeFill){
                        obj.html = '<input type="checkbox" name="" lay-skin="primary" lay-filter="allChoose">';
                 }}
                       <th>{{ d.tdBeforeFill(obj) }}</th>
                 {{# }else{ }}
                       <th><input type="checkbox" name="" lay-skin="primary" lay-filter="allChoose"></th>
                 {{# } }}
                 {{# } }}
                 {{# if(d.hasOperation){
                    col++;
                    obj.col = col;
                 }}
                      {{# if(d.tdBeforeFill){
                            obj.html = '操作';
                       }}
                            <th>{{ d.tdBeforeFill(obj) }}</th>
                       {{# }else{ }}
                            <th>操作</th>
                       {{# } }}
                 {{# } }}
                 {{#
                  var i = 0;
                  layui.each(d.attrs, function(index, item){
                    if(i<tableTdConfig.cellLeftCount){
                        i++;
                        col++;
                        obj.col = col;
                    }}
                    <th>
                         {{# if(d.tdBeforeFill){
                            obj.html = item.alias;
                         }}
                             {{ d.tdBeforeFill(obj) }}
                         {{# }else{ }}
                            {{= item.alias }}
                         {{# } }}
                    </th>
                {{#  } }); }}
            </tr>
        </thead>
        <tbody>
            {{#
            layui.each(d.data.content, function(index, item){
                col = 0;
                row++;
                obj.row = row;
                obj.col = col;
                obj.item = item;
                obj.prop="";
                var itemStr = JSON.stringify(item);
            }}
               {{# if(item && d.trClick){ }}
               <tr onclick='{{d.trClick}}({{= itemStr }} )'>
               {{# }else{ }}
               <tr>
               {{# } }}
               {{# if(d.hasCheckbox){
                col++;
                obj.col = col;
               }}
                    {{# if(d.tdBeforeFill){
                        obj.html = "<input type='checkbox' data-id='"+ item.id +"' name='tdCheckbox' lay-skin='primary' />";
                    }}
                        <td> {{ d.tdBeforeFill(obj) }} </td>
                     {{# }else{ }}
                        <td><input type="checkbox" data-id="{{= item.id }}" name="tdCheckbox" lay-skin="primary"></td>
                     {{# } }}
               {{# } }}
               {{# if(d.hasOperation){
                    col++;
                    obj.col = col;
                }}
                {{# if(d.tdBeforeFill){
                    obj.html="";
                    layui.each(d.operations, function(index, operation){
                        obj.html = obj.html + "<a href='javascript:;' class='" + operation["class"]  + "' onclick='"+ operation.onclick +"("+ item.id +")'>"+ operation.value +"</a> ";
                    });
                }}
                 <td class="operate"> {{ d.tdBeforeFill(obj) }} </td>
                {{# }else{ }}
                <td class="operate">
                {{#  layui.each(d.operations, function(index, operation){ }}
                    <a href="javascript:;" class="{{= operation['class'] }}" onclick="{{= operation.onclick+'('+item.id+')' }}">{{= operation.value }}
                    </a>
                {{# }); }}
                </td>
                {{# } }}
                {{# } }}
            {{#
                i = 0;
                layui.each(d.attrs, function(index, attr){
                     if(i<tableTdConfig.cellLeftCount){
                     i++;
                     col++;
                     obj.col = col;
                     obj.prop=attr.prop;
            }}
            {{# if(d.trClick){ }}
                <td onclick="TmplUtils.__tablePreviewSwitch('{{ item.id }}')">
            {{# }else{ }}
                <td>
            {{# } }}
            {{#
                var propValue = TmplUtils._getPropValue(itemStr,attr.prop);
            }}
            {{#        if(attr.type == "date"){
            }}
                {{# if(d.tdBeforeFill){
                    obj.html = Utils.getDate(propValue);
                 }}
                    {{ d.tdBeforeFill(obj) }}
                {{# }else{ }}
                           {{= Utils.getDate(propValue) }}
                {{# } }}
            {{#
                       }else if(attr.type == "enum" && !attr.enum_url){
            }}
                {{# if(d.tdBeforeFill){
                    if(attr.dict_key){
                        obj.html = TmplUtils.__getEnumVal(d.enums,attr.dict_key.split('.')[0],attr.dict_key.split('.')[1],propValue);
                    }else{
                        obj.html = TmplUtils.__getEnumVal(d.enums,d.table,attr.prop,propValue);
                    }
                 }}
                    {{ d.tdBeforeFill(obj) }}
                {{# }else{ }}
                {{# if(attr.dict_key){ }}
                    {{= TmplUtils.__getEnumVal(d.enums,attr.dict_key.split('.')[0],attr.dict_key.split('.')[1],propValue) }}
                {{# }else{ }}
                    {{= TmplUtils.__getEnumVal(d.enums,d.table,attr.prop,propValue) }}
                {{# } }}
                {{# } }}
            {{#      }else if(attr.type == "money"){
            }}
                            {{# if(d.tdBeforeFill){
                                obj.html = Utils.numberToMoney(propValue,attr.digit);
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                {{= Utils.numberToMoney(propValue,attr.digit) }}
                           {{# } }}
			{{#      }else if(attr.type == "imgUrl"){
            }}
                            {{# if(d.tdBeforeFill){
                                obj.html = "<img src='"+ propValue + "'  alt='"+ propValue+"' height='30' width='60'  />";
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                               {{= <img src="{{  propValue }}"  alt="{{ propValue }}" />}}
                           {{# } }}
            {{#      }else if(attr.type == "enum" && attr.enum_url){
            }}
                            {{# if(d.tdBeforeFill){
                                obj.html = '<span class="_enumurl" data-enumurl="'+attr.enum_url+ '" data-enumparam="'+attr.enum_param+  '" data-key="'+propValue+'" data-prop="'+attr.prop+'"></span>';
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                <span class="_enumurl" data-enumurl="{{attr.enum_url}}" data-enumparam="{{attr.enum_param}}" data-key="{{propValue}}" data-prop="{{attr.prop}}"></span>
                           {{# } }}
            {{#      }else if(attr.type == "enumLink"){
                var enumUrls = attr.enum_urls.split(',');
                var values = [];
                if(propValue){
                    values = propValue.split(",");
                }
                obj.html = "";
            }}
                {{#
                    for(var k=0;k< enumUrls.length;k++){
                     obj.html += '<span class="_enumurl" data-enumurl="'+enumUrls[k]+ '" data-enumparam="'+attr.enum_param+  '" data-key="'+values[k]+'" data-prop="'+attr.prop+ '_'+k+'"></span>';
                    if(!d.tdBeforeFill){
                }}
                        <span class="_enumurl" data-enumurl="{{enumUrls[k]}}" data-enumparam="{{attr.enum_param}}" data-key="{{values[k]}}" data-prop="{{attr.prop}}_{{k}}"></span>
                {{# } }
                 if(d.tdBeforeFill){
                }}
                 {{ d.tdBeforeFill(obj) }}
                {{# } }}
            {{# }else if(attr.type == "multipleChoice") { }}
                        {{# if(d.tdBeforeFill){
                                obj.html = '<span class="_multipleChoice" data-choiceurl="'+attr.choice_url+ '" data-choiceparam="'+attr.choice_param+  '" data-keys="'+propValue+'" data-prop="'+attr.prop+'"></span>';
                            }}
                            {{ d.tdBeforeFill(obj) }}
                       {{# }else{ }}
                            <span class="_multipleChoice" data-choiceurl="{{attr.choice_url}}" data-choiceparam="{{attr.choice_param}}" data-keys="{{propValue}}" data-prop="{{attr.prop}}"></span>
                       {{# } }}
            {{#      }else if(attr.type == "datetime"){
            }}
                            {{# if(d.tdBeforeFill){
                                obj.html = Utils.getDatetime(propValue);
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                {{= Utils.getDatetime(propValue) }}
                           {{# } }}
            {{#      }else if(attr.type == "time"){
            }}
                            {{# if(d.tdBeforeFill){
                                obj.html = Utils.getTime(propValue);
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                {{= Utils.getTime(propValue) }}
                           {{# } }}
            {{#
                       }else{
            }}
                {{# if(d.tdBeforeFill){
                    obj.html = propValue;
                }}
                 {{ d.tdBeforeFill(obj) }}
                {{# }else{ }}
                     {{= propValue }}
                {{# } }}
            {{# } }}
                 </td>
            {{#     } }); }}
              </tr>
            {{#  }); }}

            {{#
                if(d.data.content.length <  10){
                    for(var i = 0 ;i <  10-d.data.content.length ; i++){
                       }}
                        <tr>

            {{#
                        for(var j=0; j< tableTdConfig.totalCellLeftCount;j++){

            }}
                            <td></td>
            {{#
                        }
             }}
                        </tr>
            {{#
                    }
                }
            }}
    </tbody>
</table>

{{# if(tableTdConfig.hasRight){ }}
<table id="tableRight" data-hasrightwidth="{{tableTdConfig.hasRightWidth}}" class="layui-table lay-even lay-tab-right" id="layui-table-tr" style="min-height: 450px;">
    <colgroup>
    {{#  for(var i=0; i<tableTdConfig.totalCellRightCount; i++){ }}
        <col width="{{=tableTdConfig.tdRightWidthList[i]}}%">
    {{#   } }}
    </colgroup>
    <thead>
        <tr>
             {{#
            var row2 = 1;
            var col2 = col;
            obj.row = row2;
            obj.col = col2;
            obj.prop = "";
             var j = 0;
              layui.each(d.attrs, function(index, item){
                j++;
                if(j> tableTdConfig.cellLeftCount && j<=(tableTdConfig.cellLeftCount + tableTdConfig.cellRightCount)){
                    col2++;
                    obj.col = col2;
                }}
                <th>
                {{# if(d.tdBeforeFill){
                    obj.html = item.alias;
                }}
                   {{= d.tdBeforeFill(obj) }}
                {{# }else{ }}
                   {{= item.alias }}
                {{# } }}
                </th>
            {{#  } }); }}
        </tr>
    </thead>
     <tbody>
            {{#
            layui.each(d.data.content, function(index, item){
                row2 ++;
                col2 = col;
                obj.col = col2;
                obj.row = row2;
                obj.item = item;
                var itemStr = JSON.stringify(item);
            }}
               {{# if(item && d.trClick){ }}
               <tr onclick='{{d.trClick}}({{= itemStr }} )'>
               {{# }else{ }}
               <tr>
               {{# } }}
            {{#
                i = 0;
                layui.each(d.attrs, function(index, attr){
                      i++;
                     obj.prop=attr.prop;
                     if(i> tableTdConfig.cellLeftCount && i<=(tableTdConfig.cellLeftCount + tableTdConfig.cellRightCount)){
                      col2++;
                      obj.col = col2;
            }}
                         {{# if(d.trClick){ }}
                            <td onclick="TmplUtils.__tablePreviewSwitch('{{ item.id }}')">
                        {{# }else{ }}
                            <td>
                        {{# } }}
            {{#
                 var propValue = TmplUtils._getPropValue(itemStr,attr.prop);
            }}
            {{#        if(attr.type == "date"){
            }}
                            {{# if(d.tdBeforeFill){
                                obj.html = Utils.getDate(propValue);
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                {{= Utils.getDate(propValue) }}
                           {{# } }}
             {{#      }else if(attr.type == "datetime"){
            }}
                            {{# if(d.tdBeforeFill){
                                obj.html = Utils.getDatetime(propValue);
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                {{= Utils.getDatetime(propValue) }}
                           {{# } }}
            {{#      }else if(attr.type == "time"){
            }}
                            {{# if(d.tdBeforeFill){
                                obj.html = Utils.getTime(propValue);
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                {{= Utils.getTime(propValue) }}
                           {{# } }}
            {{#
                       }else if(attr.type == "enum" && !attr.enum_url){
            }}
                       {{# if(d.tdBeforeFill){
                            if(attr.dict_key){
                                obj.html = TmplUtils.__getEnumVal(d.enums,attr.dict_key.split('.')[0],attr.dict_key.split('.')[1],propValue);
                            }else{
                                obj.html = TmplUtils.__getEnumVal(d.enums,d.table,attr.prop,propValue);
                            }
                       }}
                            {{ d.tdBeforeFill(obj) }}
                      {{# }else{ }}
                            {{# if(attr.dict_key){ }}
                                {{= TmplUtils.__getEnumVal(d.enums,attr.dict_key.split('.')[0],attr.dict_key.split('.')[1],propValue) }}
                            {{# }else{ }}
                                {{= TmplUtils.__getEnumVal(d.enums,d.table,attr.prop,propValue) }}
                            {{# } }}
                      {{# } }}
             {{#      }else if(attr.type == "enumLink"){
                    var enumUrls = attr.enum_urls.split(',');
                    var values = [];
                    if(propValue){
                        values = propValue.split(",");
                    }
                    obj.html = "";
                    }}

                    {{#
                        for(var k=0;k< enumUrls.length;k++){
                         obj.html += '<span class="_enumurl" data-enumurl="'+enumUrls[k]+ '" data-enumparam="'+attr.enum_param+  '" data-key="'+values[k]+'" data-prop="'+attr.prop+ '_'+k+'"></span>';
                        if(!d.tdBeforeFill){
                    }}
                            <span class="_enumurl" data-enumurl="{{enumUrls[k]}}" data-enumparam="{{attr.enum_param}}" data-key="{{values[k]}}" data-prop="{{attr.prop}}_{{k}}"></span>
                    {{# } }
                     if(d.tdBeforeFill){
                    }}
                     {{ d.tdBeforeFill(obj) }}
                    {{# } }}
             {{#      }else if(attr.type == "lazyEnum"){
                    var enumUrls = attr.enum_urls.split(',');
                    var values = propValue&&propValue.split(",");
					var val = '';
                    obj.html = "";
                    }}

                    {{#
                        for(var k=0;k< enumUrls.length;k++){
						val = (!val?val:(val+',')) + values[k];
                         obj.html += '<span class="_lazyEnum" data-enumurl="'+enumUrls[k]+ '" data-enumparam="'+attr.enum_param+  '" data-key="'+val+'" data-prop="'+attr.prop+ '_'+k+'"></span>';
                        if(!d.tdBeforeFill){
                    }}
                            <span class="_lazyEnum" data-enumurl="{{enumUrls[k]}}" data-enumparam="{{attr.enum_param}}" data-key="{{val}}" data-prop="{{attr.prop}}_{{k}}"></span>
                    {{# } }
                     if(d.tdBeforeFill){
                    }}
                     {{ d.tdBeforeFill(obj) }}
                    {{# } }}
                {{#      }else if(attr.type == "money"){
                }}
                            {{# if(d.tdBeforeFill){
                                obj.html = Utils.numberToMoney(propValue,attr.digit);
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                {{= Utils.numberToMoney(propValue,attr.digit) }}
                           {{# } }}
                {{#      }else if(attr.type == "enum" && attr.enum_url){
                }}
                            {{# if(d.tdBeforeFill){
                                obj.html = '<span class="_enumurl" data-enumurl="'+attr.enum_url+ '" data-enumparam="'+attr.enum_param+  '" data-key="'+propValue+'" data-prop="'+attr.prop+'"></span>';
                            }}
                                {{ d.tdBeforeFill(obj) }}
                           {{# }else{ }}
                                <span class="_enumurl" data-enumurl="{{attr.enum_url}}" data-enumparam="{{attr.enum_param}}" data-key="{{propValue}}" data-prop="{{attr.prop}}"></span>
                           {{# } }}

                {{# }else if(attr.type == "multipleChoice") { }}
                        {{# if(d.tdBeforeFill){
                                obj.html = '<span class="_multipleChoice" data-choiceurl="'+attr.choice_url+ '" data-choiceparam="'+attr.choice_param+  '" data-keys="'+propValue+'" data-prop="'+attr.prop+'"></span>';
                            }}
                            {{ d.tdBeforeFill(obj) }}
                       {{# }else{ }}
                            <span class="_multipleChoice" data-choiceurl="{{attr.choice_url}}" data-choiceparam="{{attr.choice_param}}" data-keys="{{propValue}}" data-prop="{{attr.prop}}"></span>
                       {{# } }}
                {{#
                       }else{
                }}
                       {{# if(d.tdBeforeFill){
                                obj.html = propValue;
                        }}
                       {{ d.tdBeforeFill(obj) }}
                        {{# }else{ }}
                             {{= propValue }}
                        {{# } }}
                {{# } }}
                 </td>
                {{#     } }); }}
                    </tr>
                {{#  }); }}

            {{#

                if(d.data.content.length <  10){
                    for(var i = 0 ;i <  10-d.data.content.length ; i++){
                       }}
                        <tr>

            {{#
                        for(var j=0; j< tableTdConfig.cellRightCount;j++){

            }}
                            <td></td>
            {{#
                        }
             }}
                        </tr>
            {{#
                    }
                }
            }}
    </tbody>
</table>
{{# } }}

 {{# if(d.trClick){ }}
    <table class="layui-table lay-even viewTable" style="min-height: 450px;">
        <thead>
        <tr data-index="0">
            <th>
                --
            </th>
        </tr>
        </thead>
        <tbody>
		  {{# layui.each(d.data.content, function(index, item){ 
			  var itemStr = JSON.stringify(item);
		  }}
       		 <tr data-index="{{= index }}" onclick='{{d.trClick}}({{= itemStr }} )' id="tr_{{ item.id }}">
           	 	<td style="cursor: pointer;"  onclick="TmplUtils.__tablePreviewOpen('{{ item.id }}')">
                	<span class="ico-shrink" title="快捷列表" ></span>
            	</td>
       		 </tr>
		{{# }); }}

		{{# for(var i =0;i<10-d.data.content.length;i++){ }}
			<tr data-index="{{= i }}">
           	 	<td>
            	</td>
       		 </tr>
		{{# } }}
        </tbody>
    </table>
{{# } }}
</script>