<script type="text/tmpl">
        <form class="layui-form FR" id="filterCriteria">
            <div class="layui-form-item layui-form-search">
                <div class="layui-inline" id="layui-form-select-p">
{{#
    var criterias = [];
    for(var i=0; i<d.attrs.length; i++){
        if(d.attrs[i].query && d.attrs[i].query == 1 && d.attrs[i].query_order && d.attrs[i].query_order > 0){
            criterias.push(d.attrs[i]);
        }
    }
    criterias.sort(Utils.compare("query_order"));
    var i=0;
    layui.each(criterias, function(index, item){
    if(i < Const.criteriaCount){
        i++;
}}
{{#
        if(item.type == "date"){
}}
                    <div class="layui-input-inline">
                        <input type="text" name="{{ item.prop }}" data-type="{{ item.type }}"
                               placeholder="{{ item.alias }}" autocomplete="off"
                               class="layui-input _query" data-desc="{{= item.desc }}" onclick="layui.laydate({elem: this,choose:function(datas){ {{=d.dateChangeCall}}(datas);} })">
                    </div>
{{#
        }else if(item.type == "datetime"){
}}		
                    <div class="layui-input-inline">
                        <input type="text" name="{{ item.prop }}" data-type="{{ item.type }}"
                               placeholder="{{ item.alias }}" autocomplete="off"
                               class="layui-input _query" data-desc="{{= item.desc }}" onclick="layui.laydate({elem: this,istime: true,format: 'YYYY-MM-DD hh:mm:ss',choose:function(datas){ {{=d.dateChangeCall}}(datas);} })">
                    </div>

{{#     }else if(item.type == "enum"){
}}
                    <div class="layui-input-inline">
                        <select name="{{=item.prop}}" class="_query" lay-filter="{{ item.prop }}" data-desc="{{= item.desc }}" {{# if(1==item.enum_search){ }} lay-search {{# } }} data-enumurl="{{ item.enum_url }}" data-enumparam="{{item.enum_param}}" data-type="{{=item.type}}" data-prop="{{=item.prop}}">
                            <option value="--##--">--{{=item.alias}}--</option>

                    {{#
                        var keyVals = [];
                        if(item.dict_key){
                            keyVals = TmplUtils.__getEnumKeyVals(d.enums,item.dict_key.split('.')[0],item.dict_key.split('.')[1]);
                        }else{
                            keyVals = TmplUtils.__getEnumKeyVals(d.enums,d.table,item.prop);
                        }
                        layui.each(keyVals, function(index, keyVal){
                    }}
                         <option value="{{ keyVal.key }}">{{= keyVal.val }}</option>
                    {{# }); }}
                        </select>
                    </div>
{{#     }else{ }}
                    <div class="layui-input-inline">
                        <input type="text" name="{{ item.prop }}" data-type="{{ item.type }}"
                               placeholder="{{ item.alias }}" data-desc="{{= item.desc }}" autocomplete="off" class="layui-input _query">
                    </div>
 {{#  } } }); }}

{{# if(criterias.length > Const.criteriaCount){
}}
    <div class="layui-btn layui-btn-primary" id="layui-form-select-l">
        <i class="layui-icon">&#xe615;</i>筛选
    </div>

{{# } }}
 <span class="layui-btn layui-btn-normal modal-full" onclick="{{= d.searchClick }}()" >查询</span>
  {{# if(criterias.length > Const.criteriaCount){
        criterias.splice(0,Const.criteriaCount);
  }}


        <div class="layui-anim layui-anim-upbit search-term">
            <form class="layui-form" action="">
  {{#     layui.each(criterias, function(index, item){
  }}
{{#
        if(item.type == "date"){
}}
                            <div class="layui-form-item">
                                <label class="layui-form-label">{{ item.alias }}</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="{{ item.prop }}" data-type="{{ item.type }}"
                                           placeholder="yyyy-mm-dd" autocomplete="off"
                                           class="layui-input _query" data-desc="{{= item.desc }}"  onclick="layui.laydate({elem: this,choose:function(datas){ {{=d.dateChangeCall}}(datas);} })">
                                </div>
                            </div>

{{#     }else if(item.type == "enum"){
}}
                            <div class="layui-form-item">
                                <label class="layui-form-label">{{ item.alias }}：</label>
                                <div class="layui-input-inline">
                                    <select name="{{=item.prop}}" class="_query" data-desc="{{= item.desc }}" {{# if(1==item.enum_search){ }} lay-search {{# } }} data-enumurl="{{ item.enum_url }}" data-enumparam="{{item.enum_param}}">
                                        <option value="--##--">--请选择--</option>

                                {{#
                                    var keyVals = [];
                                    if(item.dict_key){
                                        keyVals = TmplUtils.__getEnumKeyVals(d.enums,item.dict_key.split('.')[0],item.dict_key.split('.')[1]);
                                    }else{
                                        keyVals = TmplUtils.__getEnumKeyVals(d.enums,d.table,item.prop);
                                    }
                                    layui.each(keyVals, function(index, keyVal){
                                }}
                                     <option value="{{ keyVal.key }}">{{= keyVal.val }}</option>
                                {{# }); }}
                                    </select>
                                </div>
                            </div>


  {{#     }else{ }}
                            <div class="layui-form-item">
                                <label class="layui-form-label">{{ item.alias }}</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="{{ item.prop }}" data-type="{{ item.type }}"
                                           placeholder="{{ item.alias }}" data-desc="{{= item.desc }}" autocomplete="off" class="layui-input _query">
                                </div>
                            </div>
  {{#  } }}
  {{#  }); }}
            </form>
    </div>
  {{# } }}


                </div>
            </div>
        </form>
</script>