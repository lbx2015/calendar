<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>报文说明或规则</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link type="include" href="/common/depcss.html" />
</head>

<body>
    <div style="text-align: center;">
        <h1 id='title'></h1>
        <div style='width: 90%; margin:5%;'>
            <textarea id="reportNote"></textarea>
            <textarea id="reportRule"></textarea>
        </div>
    </div>
</body>
<script type="text/javascript" src="{=ctx}/layui/layui.all.js"></script>
<script type="text/javascript" src="{=ctx}/js/util/utils.js"></script>
<script type="text/javascript" src="{=ctx}/js/core/base.js"></script>
<script type="text/javascript" src="{=ctx}/js/core/base64_utf8.js"></script>
<script type="text/javascript" src="{=ctx}/js/util/tmplUtils.js"></script>
<script type="text/javascript" src="{=ctx}/js/core/view.js"></script>
<script type="text/javascript" src="{=ctx}/js/util/iframe.js"></script>
<script type="text/javascript" src="{=ctx}/js/util/html5.js"></script>
<script type="text/javascript" src="{=ctx}/js/core/iefix.js"></script>
<script>
	var _SYS = Tool.parseJSON('{=current_system}' || "{}");
	var Const = {
		sys : _SYS,
		apiUrl : _SYS.apiAccessUrl,
		webPath : "{=web_path}",
		ctx : "{=ctx}",
		security : "{=security}" == "true",
		ssoLoginUrl : "{=sso_login_url}",
		ssoApiUrl : "{=sso_api_url}",
		cellLeftCount : 4,
		cellRightCount : 3,
		criteriaCount : 3
	}
    var id = View.getQStr('id');
    var type = View.getQStr('type');
    var url = View.getQStr('url');
    $(function() {
        if (id) {
            url += "/reportList/getForHtml";
            View.get(url, "id=" + id, function(resp) {
                $("#reportNote").val(resp.reportNote);
                $("#reportRule").val(resp.reportRule);
                loadRichText(type);
            }, function() {
                TmplUtils.showMsgFail('信息获取失败');
            });
        }
    })
    function loadRichText(type) {
        layui.use('layedit', function() {
            var layedit = layui.layedit;
            layedit.set({
                tool: ['strong' //加粗
                    , 'italic' //斜体
                    , 'underline' //下划线
                    , 'del' //删除线
                    , '|' //分割线
                    , 'left' //左对齐
                    , 'center' //居中对齐
                    , 'right' //右对齐
                    , '|', 'link' //超链接
                    , 'unlink' //清除链接
                    , 'face' //表情
                    , 'image' //插入图片
                    //,'help' //帮助
                ],
                height: 500
            });
            if (type == "note") {
                $("#reportRule").hide();
                layedit.build('reportNote');
                $("#title").html("报文说明")
            } else {
                $("#reportNote").hide();
                layedit.build('reportRule'); //建立编辑器
                $("#title").html("报文规则")
            }

        });
    }
</script>

</html>